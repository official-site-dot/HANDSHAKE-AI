<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HandShake AI | Start Earning Today</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', sans-serif;
        }

        body {
            background: #0a0a16;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Blurred Background */
        .blur-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(10, 10, 22, 0.95) 0%, 
                rgba(26, 26, 46, 0.95) 50%, 
                rgba(30, 41, 59, 0.95) 100%);
            backdrop-filter: blur(20px);
            z-index: 1;
        }

        /* 3D Background */
        #threeCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 40px;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
        }

        .logo-text {
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(to right, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tagline {
            color: #a5b4fc;
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Progress Steps */
        .progress-container {
            display: flex;
            justify-content: center;
            margin: 40px 0 60px;
            position: relative;
        }

        .progress-line {
            position: absolute;
            top: 25px;
            left: 50px;
            right: 50px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1;
        }

        .progress-fill {
            position: absolute;
            top: 25px;
            left: 50px;
            height: 4px;
            background: linear-gradient(to right, #667eea, #764ba2);
            z-index: 2;
            transition: width 0.5s ease;
            width: 0%;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 3;
            position: relative;
            width: 200px;
        }

        .step-circle {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .step.completed .step-circle {
            background: #10b981;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .step-label {
            font-weight: 600;
            color: #a5b4fc;
            text-align: center;
        }

        .step.active .step-label {
            color: #ffffff;
        }

        /* Page Container */
        .page {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 50px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            animation: fadeSlide 0.6s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeSlide {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Form Styles */
        .form-title {
            text-align: center;
            margin-bottom: 50px;
        }

        .form-title h1 {
            font-size: 36px;
            margin-bottom: 15px;
            background: linear-gradient(to right, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .form-title p {
            color: #a5b4fc;
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: #e2e8f0;
            font-size: 16px;
        }

        .form-control {
            width: 100%;
            padding: 18px 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
            background: rgba(255, 255, 255, 0.08);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 18px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover:before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-block {
            width: 100%;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        /* Payment Methods */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .payment-method {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
            text-align: center;
            cursor: pointer;
        }

        .payment-method:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .payment-method.selected {
            background: rgba(102, 126, 234, 0.15);
            border-color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .payment-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .mpesa-icon { color: #00A859; }
        .binance-icon { color: #F0B90B; }
        .zelle-icon { color: #6D5ACD; }
        .paypal-icon { color: #0070BA; }

        /* Activation Section */
        .activation-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }

        .activation-amount {
            text-align: center;
            margin: 30px 0;
        }

        .amount-dollar {
            font-size: 64px;
            font-weight: 800;
            color: #10b981;
            margin-bottom: 10px;
        }

        .amount-kes {
            font-size: 28px;
            color: #a5b4fc;
        }

        .payment-instructions {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            display: none;
        }

        .payment-instructions.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .till-number {
            text-align: center;
            padding: 25px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            margin: 25px 0;
            font-family: monospace;
        }

        .till-number .number {
            font-size: 42px;
            font-weight: 800;
            color: #10b981;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .till-number .label {
            color: #a5b4fc;
            font-size: 14px;
            letter-spacing: 2px;
        }

        /* M-Pesa Transaction Code Section */
        .transaction-section {
            background: rgba(0, 168, 89, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            border: 1px solid rgba(0, 168, 89, 0.2);
            display: none;
        }

        .transaction-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Message Boxes */
        .message {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .message.active {
            display: block;
        }

        .message.success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #a7f3d0;
        }

        .message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fecaca;
        }

        .message.info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #bfdbfe;
        }

        .message.warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #fde68a;
        }

        /* Jobs Dashboard */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-welcome h2 {
            font-size: 32px;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .user-welcome p {
            color: #a5b4fc;
        }

        .wallet-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
            border-radius: 20px;
            padding: 35px;
            margin: 40px 0;
            border: 1px solid rgba(102, 126, 234, 0.2);
            text-align: center;
        }

        .wallet-amount {
            font-size: 56px;
            font-weight: 800;
            color: #10b981;
            margin: 20px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .stat-value {
            font-size: 42px;
            font-weight: 800;
            color: #667eea;
            margin: 15px 0;
        }

        .stat-label {
            color: #a5b4fc;
            font-size: 16px;
            font-weight: 600;
        }

        /* Jobs Grid */
        .jobs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .job-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
            position: relative;
        }

        .job-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
        }

        .job-title {
            font-size: 22px;
            font-weight: 700;
            color: #ffffff;
            line-height: 1.4;
        }

        .job-pay {
            text-align: right;
        }

        .job-pay .amount {
            font-size: 28px;
            font-weight: 800;
            color: #10b981;
        }

        .job-pay .kes {
            font-size: 14px;
            color: #a5b4fc;
            margin-top: 5px;
        }

        .job-description {
            color: #cbd5e1;
            line-height: 1.7;
            margin-bottom: 25px;
        }

        .job-meta {
            display: flex;
            gap: 25px;
            margin-bottom: 25px;
            color: #a5b4fc;
            font-size: 15px;
        }

        .job-meta i {
            margin-right: 8px;
            color: #667eea;
        }

        .job-status {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-applied {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .status-pending {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .status-submitted {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        /* Job Submission Modal */
        .submission-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .submission-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .submission-content {
            background: rgba(30, 41, 59, 0.95);
            border-radius: 25px;
            padding: 50px;
            max-width: 600px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .submission-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .submission-header h2 {
            font-size: 32px;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .submission-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 30px 0;
            overflow: hidden;
        }

        .submission-progress-bar {
            height: 100%;
            background: linear-gradient(to right, #10b981, #059669);
            border-radius: 4px;
            width: 0%;
            transition: width 2s linear;
        }

        /* Withdraw Popup */
        .withdraw-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .withdraw-popup.active {
            display: flex;
        }

        .withdraw-content {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(102, 126, 234, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .withdraw-icon {
            font-size: 64px;
            color: #10b981;
            margin-bottom: 20px;
        }

        .withdraw-content h3 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #ffffff;
        }

        .withdraw-content p {
            color: #a5b4fc;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
            color: #a5b4fc;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .step {
                width: 150px;
            }
            
            .jobs-grid {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .progress-container {
                flex-direction: column;
                align-items: center;
                gap: 40px;
            }
            
            .progress-line, .progress-fill {
                display: none;
            }
            
            .step {
                width: 100%;
                flex-direction: row;
                gap: 20px;
            }
            
            .step-circle {
                margin-bottom: 0;
            }
            
            .page {
                padding: 30px;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .jobs-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .submission-content {
                padding: 30px;
            }
            
            .withdraw-content {
                padding: 30px;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- 3D Background -->
    <canvas id="threeCanvas"></canvas>
    
    <!-- Blurred Background -->
    <div class="blur-background"></div>
    
    <!-- Job Submission Modal -->
    <div class="submission-modal" id="submissionModal">
        <div class="submission-content">
            <div class="submission-header">
                <h2>Submitting Your Work</h2>
                <p>Please wait while we process your submission...</p>
            </div>
            
            <div class="submission-progress">
                <div class="submission-progress-bar" id="progressBar"></div>
            </div>
            
            <div id="submissionStatus">
                <div style="text-align: center;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 48px; color: #667eea; margin-bottom: 20px;"></i>
                    <p style="color: #a5b4fc;">Processing your work submission...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Withdraw Popup -->
    <div class="withdraw-popup" id="withdrawPopup">
        <div class="withdraw-content">
            <div class="withdraw-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>Withdrawal Request Submitted</h3>
            <p>Your withdrawal request of <strong id="withdrawAmount">$0.00</strong> has been successfully submitted.</p>
            <p>Funds will reflect in your account after 24 hours.</p>
            <button class="btn btn-block" onclick="closeWithdrawPopup()" style="margin-top: 20px;">
                <i class="fas fa-check"></i> Got It
            </button>
        </div>
    </div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-handshake"></i>
                </div>
                <div class="logo-text">HandShake AI</div>
            </div>
            <p class="tagline">Connect with premium online jobs. Earn from anywhere with just an internet connection.</p>
        </div>
        
        <!-- Progress Steps -->
        <div class="progress-container">
            <div class="progress-line"></div>
            <div class="progress-fill" id="progressFill"></div>
            
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <div class="step-label">Create Account</div>
            </div>
            
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <div class="step-label">Complete Profile</div>
            </div>
            
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <div class="step-label">Wallet Setup</div>
            </div>
            
            <div class="step" id="step4">
                <div class="step-circle">4</div>
                <div class="step-label">Activate Account</div>
            </div>
            
            <div class="step" id="step5">
                <div class="step-circle">5</div>
                <div class="step-label">Start Earning</div>
            </div>
        </div>
        
        <!-- Page 1: Login -->
        <div class="page active" id="page-login">
            <div class="form-title">
                <h1>Create Your Account</h1>
                <p>Sign up to start earning from online jobs</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Create Password</label>
                    <input type="password" class="form-control" id="password" placeholder="Create a secure password" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm your password" required>
                </div>
                
                <div class="message info">
                    <i class="fas fa-info-circle"></i> Your account will be created automatically when you proceed.
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-block">
                        <i class="fas fa-user-plus"></i> Create Account & Continue
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Page 2: Profile -->
        <div class="page" id="page-profile">
            <div class="form-title">
                <h1>Complete Your Profile</h1>
                <p>Tell us about yourself to get personalized job recommendations</p>
            </div>
            
            <form id="profileForm">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="fullName" placeholder="Enter your full name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" placeholder="0712345678" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Country</label>
                    <select class="form-control" id="country" required>
                        <option value="">Select your country</option>
                        <option value="Kenya">Kenya</option>
                        <option value="USA">United States</option>
                        <option value="UK">United Kingdom</option>
                        <option value="Nigeria">Nigeria</option>
                        <option value="South Africa">South Africa</option>
                        <option value="Ghana">Ghana</option>
                        <option value="Tanzania">Tanzania</option>
                        <option value="Uganda">Uganda</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Years of Experience</label>
                    <select class="form-control" id="experience" required>
                        <option value="">Select experience level</option>
                        <option value="0-1">0-1 years (Beginner)</option>
                        <option value="1-3">1-3 years (Intermediate)</option>
                        <option value="3-5">3-5 years (Advanced)</option>
                        <option value="5+">5+ years (Expert)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Your Skills (Select all that apply)</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="writing"> Content Writing
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="data"> Data Entry
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="design"> Graphic Design
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="web"> Web Development
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="social"> Social Media
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="translation"> Translation
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="video"> Video Editing
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="marketing"> Digital Marketing
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-block">
                        <i class="fas fa-save"></i> Save Profile & Continue
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Page 3: Wallet -->
        <div class="page" id="page-wallet">
            <div class="form-title">
                <h1>Setup Payment Wallet</h1>
                <p>Add your payment details to receive earnings</p>
            </div>
            
            <form id="walletForm">
                <div class="form-group">
                    <label class="form-label">Select Payment Method</label>
                    <select class="form-control" id="paymentMethod" required>
                        <option value="">Select your preferred payment method</option>
                        <option value="mpesa">M-Pesa (Kenya)</option>
                        <option value="binance">Binance (Crypto)</option>
                        <option value="zelle">Zelle (USA)</option>
                        <option value="paypal">PayPal (Worldwide)</option>
                        <option value="bank">Bank Transfer</option>
                    </select>
                </div>
                
                <div id="mpesaDetails" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">M-Pesa Phone Number</label>
                        <input type="tel" class="form-control" id="mpesaNumber" placeholder="0712345678">
                        <div style="color: #a5b4fc; font-size: 14px; margin-top: 8px;">Must be registered with M-Pesa</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Confirm M-Pesa Number</label>
                        <input type="tel" class="form-control" id="confirmMpesa" placeholder="Confirm your number">
                    </div>
                </div>
                
                <div id="binanceDetails" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Binance Pay ID</label>
                        <input type="text" class="form-control" id="binanceId" placeholder="Your Binance Pay ID">
                    </div>
                </div>
                
                <div id="zelleDetails" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Zelle Email or Phone</label>
                        <input type="text" class="form-control" id="zelleDetails" placeholder="Email or phone linked to Zelle">
                    </div>
                </div>
                
                <div id="paypalDetails" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">PayPal Email</label>
                        <input type="email" class="form-control" id="paypalEmail" placeholder="Your PayPal email">
                    </div>
                </div>
                
                <div id="bankDetails" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Bank Account Number</label>
                        <input type="text" class="form-control" id="bankAccount" placeholder="Your bank account number">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Bank Name</label>
                        <input type="text" class="form-control" id="bankName" placeholder="Bank name">
                    </div>
                </div>
                
                <div class="message info">
                    <i class="fas fa-shield-alt"></i> Your payment details are securely encrypted.
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-block">
                        <i class="fas fa-wallet"></i> Save Payment Details & Continue
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Page 4: Activation -->
        <div class="page" id="page-activation">
            <div class="form-title">
                <h1>Activate Your Account</h1>
                <p>One-time payment unlocks lifetime access to premium jobs</p>
            </div>
            
            <div class="activation-container">
                <div class="activation-amount">
                    <div class="amount-dollar">$2.67</div>
                    <div class="amount-kes">KES 400 / Equivalent in your currency</div>
                </div>
                
                <div class="payment-methods">
                    <div class="payment-method selected" id="tillMethod">
                        <div class="payment-icon mpesa-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3>Till Payment</h3>
                        <p style="color: #a5b4fc; margin: 15px 0;">Pay via Till Number - KES 400</p>
                        <button class="btn btn-block" style="margin-top: 10px;" onclick="activateWithMpesa()">
                            <i class="fas fa-mobile-alt"></i> Activate with Till
                        </button>
                    </div>
                    
                    <div class="payment-method" id="binanceMethod">
                        <div class="payment-icon binance-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <h3>Binance Payment</h3>
                        <p style="color: #a5b4fc; margin: 15px 0;">Pay via Binance Pay ID</p>
                        <button class="btn btn-block" style="margin-top: 10px;" onclick="activateWithBinance()">
                            <i class="fas fa-bolt"></i> Activate with Binance
                        </button>
                        <div style="margin-top: 15px; color: #a5b4fc; font-size: 14px;">
                            <i class="fas fa-info-circle"></i> Pay ID: <strong>982952186</strong>
                        </div>
                    </div>
                    
                    <div class="payment-method" id="otherMethod">
                        <div class="payment-icon zelle-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3>Other Methods</h3>
                        <p style="color: #a5b4fc; margin: 15px 0;">PayPal, Zelle, Bank Transfer</p>
                        <button class="btn btn-block" style="margin-top: 10px;" onclick="activateWithOther()">
                            <i class="fas fa-credit-card"></i> Activate Now
                        </button>
                    </div>
                </div>
                
                <!-- Till Instructions -->
                <div class="payment-instructions" id="mpesaInstructions">
                    <h3 style="color: #ffffff; margin-bottom: 20px; text-align: center;">
                        <i class="fas fa-mobile-alt"></i> Till Payment Instructions
                    </h3>
                    
                    <ol style="padding-left: 20px; line-height: 1.8; color: #cbd5e1;">
                        <li>Open <strong>Safaricom M-Pesa</strong> on your phone</li>
                        <li>Select <strong>Lipa Na M-Pesa</strong></li>
                        <li>Choose <strong>Buy Goods and Services</strong></li>
                        <li>Enter Till Number: <strong>7374216</strong></li>
                        <li>Enter Amount: <strong>400</strong></li>
                        <li>Enter your M-Pesa PIN</li>
                        <li>Confirm and send</li>
                        <li>Wait for confirmation SMS</li>
                    </ol>
                    
                    <div class="till-number">
                        <div class="number">7374216</div>
                        <div class="label">TILL NUMBER</div>
                    </div>
                </div>
                
                <!-- Transaction Code Section (Only for Till) -->
                <div class="transaction-section" id="transactionSection">
                    <h3 style="color: #ffffff; margin-bottom: 20px; text-align: center;">
                        <i class="fas fa-key"></i> Enter Transaction Code
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label">Transaction Code from SMS</label>
                        <input type="text" class="form-control" id="transactionCode" placeholder="e.g., ABC123XYZ456">
                        <div style="color: #a5b4fc; font-size: 14px; margin-top: 8px;">Found in your M-Pesa confirmation message</div>
                    </div>
                    
                    <button class="btn btn-block" onclick="verifyMpesaPayment()" style="margin-top: 20px;">
                        <i class="fas fa-check-circle"></i> Verify & Activate Account
                    </button>
                </div>
            </div>
            
            <div class="message" id="activationMessage"></div>
            
            <div style="text-align: center; margin-top: 30px;">
                <a href="#" onclick="goToPage(5)" style="color: #a5b4fc; text-decoration: none;">
                    <i class="fas fa-clock"></i> Browse jobs first, activate later
                </a>
            </div>
        </div>
        
        <!-- Page 5: Jobs Dashboard -->
        <div class="page" id="page-jobs">
            <div class="dashboard-header">
                <div class="user-welcome">
                    <h2 id="welcomeMessage">Welcome to HandShake AI!</h2>
                    <p id="userStatus">Account Status: <span id="statusBadge" style="color: #10b981; font-weight: 700;">Active</span></p>
                </div>
                <div>
                    <button class="btn" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i> Refresh Jobs
                    </button>
                </div>
            </div>
            
            <div class="wallet-card">
                <h3><i class="fas fa-wallet"></i> Your Earnings Wallet</h3>
                <div class="wallet-amount" id="walletBalance">$0.00</div>
                <p id="walletDetails">Available for withdrawal</p>
                <button class="btn" id="withdrawBtn" style="margin-top: 20px;" disabled>
                    <i class="fas fa-money-bill-wave"></i> Withdraw Earnings
                </button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="completedJobs">0</div>
                    <div class="stat-label">Jobs Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalEarnings">$0</div>
                    <div class="stat-label">Total Earnings</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pendingJobs">0</div>
                    <div class="stat-label">Jobs in Progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="successRate">100%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
            </div>
            
            <h2 style="margin: 50px 0 30px; font-size: 28px; color: #ffffff;">
                <i class="fas fa-briefcase"></i> Available Jobs
            </h2>
            
            <div class="jobs-grid" id="jobsContainer">
                <!-- Jobs will load here -->
            </div>
            
            <div class="message success" id="jobSuccessMessage" style="display: none;">
                <i class="fas fa-check-circle"></i> <strong>Success!</strong> You've applied for the job. Check your email for instructions.
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>Â© 2024 HandShake AI. All rights reserved.</p>
            <p style="margin-top: 10px; font-size: 14px;">Connecting talent with opportunity worldwide</p>
        </div>
    </div>

    <script>
        // New User Application State
        const appState = {
            user: null,
            profile: null,
            wallet: null,
            paymentMethod: null,
            isActive: false,
            transactionAttempts: 0,
            currentStep: 1,
            earnings: 0,
            appliedJobs: [],
            pendingJobs: [],
            completedJobs: [],
            selectedPaymentMethod: null,
            availableJobs: [
                {
                    id: 1,
                    title: "Simple Image Editing Task",
                    description: "Edit a product photo: Remove background and add a simple white shadow. Download the image, edit using any tool, and upload the PNG file. Very simple 5-10 minute task.",
                    pay: 4,
                    kes: "KES 600",
                    category: "design",
                    duration: "30 minutes",
                    level: "Beginner",
                    skills: ["Editing", "Photoshop/GIMP", "Basic"],
                    requirements: "Submit edited PNG file with transparent background"
                },
                {
                    id: 2,
                    title: "Content Writer - Tech Blogs",
                    description: "Write engaging articles about technology trends, AI developments, and digital transformation. Each article should be 800-1000 words with proper research and citations.",
                    pay: 50,
                    kes: "KES 7,500",
                    category: "writing",
                    duration: "3-5 days",
                    level: "Intermediate",
                    skills: ["Writing", "Research", "Technology"],
                    requirements: "Submit article in Word/Google Docs format"
                },
                {
                    id: 3,
                    title: "Data Entry Specialist",
                    description: "Accurately enter 300+ product records into our database. Attention to detail is crucial. Training materials will be provided.",
                    pay: 30,
                    kes: "KES 4,500",
                    category: "data",
                    duration: "2 days",
                    level: "Beginner",
                    skills: ["Data Entry", "Excel", "Attention to Detail"],
                    requirements: "Submit completed Excel spreadsheet"
                },
                {
                    id: 4,
                    title: "Social Media Manager",
                    description: "Manage Instagram and Facebook accounts for an e-commerce brand. Create content calendar, schedule posts, and engage with followers daily.",
                    pay: 45,
                    kes: "KES 6,750",
                    category: "social",
                    duration: "Weekly",
                    level: "Intermediate",
                    skills: ["Social Media", "Content Creation", "Engagement"],
                    requirements: "Submit social media plan and sample posts"
                },
                {
                    id: 5,
                    title: "Graphic Designer",
                    description: "Create marketing materials including social media graphics, banners, and email templates. Must provide source files.",
                    pay: 65,
                    kes: "KES 9,750",
                    category: "design",
                    duration: "4 days",
                    level: "Advanced",
                    skills: ["Design", "Photoshop", "Illustrator"],
                    requirements: "Submit design files in PSD/AI format"
                },
                {
                    id: 6,
                    title: "Video Editor - YouTube",
                    description: "Edit 3-5 minute videos for YouTube channel. Add subtitles, graphics, transitions, and optimize for engagement.",
                    pay: 55,
                    kes: "KES 8,250",
                    category: "video",
                    duration: "3 days",
                    level: "Intermediate",
                    skills: ["Video Editing", "Premiere Pro", "After Effects"],
                    requirements: "Submit final video file"
                },
                {
                    id: 7,
                    title: "Website Translator",
                    description: "Translate website content from English to Swahili (approximately 1500 words). Must be fluent in both languages.",
                    pay: 40,
                    kes: "KES 6,000",
                    category: "translation",
                    duration: "3 days",
                    level: "Intermediate",
                    skills: ["Translation", "Swahili", "English"],
                    requirements: "Submit translated document"
                }
            ]
        };

        // Initialize 3D Background
        function init3DBackground() {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({
                canvas: document.getElementById('threeCanvas'),
                alpha: true,
                antialias: true
            });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            
            // Create floating geometric shapes
            const geometry = new THREE.IcosahedronGeometry(1, 0);
            const material = new THREE.MeshStandardMaterial({
                color: 0x667eea,
                transparent: true,
                opacity: 0.03,
                metalness: 0.5,
                roughness: 0.3
            });
            
            const shapes = [];
            for (let i = 0; i < 8; i++) {
                const shape = new THREE.Mesh(geometry, material);
                shape.position.x = (Math.random() - 0.5) * 50;
                shape.position.y = (Math.random() - 0.5) * 30;
                shape.position.z = (Math.random() - 0.5) * 50;
                shape.scale.setScalar(Math.random() * 1.5 + 0.5);
                shape.rotation.x = Math.random() * Math.PI;
                shape.rotation.y = Math.random() * Math.PI;
                scene.add(shape);
                shapes.push(shape);
            }
            
            // Add lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.3);
            directionalLight.position.set(10, 10, 5);
            scene.add(directionalLight);
            
            camera.position.z = 35;
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                
                shapes.forEach((shape, i) => {
                    shape.rotation.x += 0.002;
                    shape.rotation.y += 0.003;
                    shape.position.y += Math.sin(Date.now() * 0.001 + i) * 0.001;
                });
                
                renderer.render(scene, camera);
            }
            
            animate();
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        // Update progress bar
        function updateProgress(step) {
            const progressFill = document.getElementById('progressFill');
            const percentage = ((step - 1) / 4) * 100;
            progressFill.style.width = `${percentage}%`;
            
            // Update step indicators
            for (let i = 1; i <= 5; i++) {
                const stepElement = document.getElementById(`step${i}`);
                stepElement.classList.remove('active', 'completed');
                
                if (i < step) {
                    stepElement.classList.add('completed');
                } else if (i === step) {
                    stepElement.classList.add('active');
                }
            }
        }

        // Navigate to page
        function goToPage(pageNumber) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show target page
            const pages = ['login', 'profile', 'wallet', 'activation', 'jobs'];
            document.getElementById(`page-${pages[pageNumber - 1]}`).classList.add('active');
            
            // Update progress
            updateProgress(pageNumber);
            appState.currentStep = pageNumber;
            
            // Page-specific setup
            if (pageNumber === 4) {
                resetActivationPage();
            } else if (pageNumber === 5) {
                loadDashboard();
                loadJobs();
            }
        }

        // Reset activation page
        function resetActivationPage() {
            // Hide all instructions and sections
            document.getElementById('mpesaInstructions').classList.remove('active');
            document.getElementById('transactionSection').classList.remove('active');
            document.getElementById('activationMessage').classList.remove('active');
            
            // Reset payment method selection (set Till as default)
            document.querySelectorAll('.payment-method').forEach(method => {
                method.classList.remove('selected');
            });
            document.getElementById('tillMethod').classList.add('selected');
            
            // Clear transaction code
            document.getElementById('transactionCode').value = '';
            document.getElementById('transactionCode').disabled = false;
            document.querySelector('#transactionSection button').disabled = false;
            
            // Reset transaction attempts
            appState.transactionAttempts = 0;
        }

        // Activate with Binance (looks like it works but doesn't)
        function activateWithBinance() {
            resetActivationPage();
            appState.selectedPaymentMethod = 'binance';
            document.getElementById('binanceMethod').classList.add('selected');
            
            // Show fake processing
            const messageDiv = document.getElementById('activationMessage');
            showMessage(
                '<i class="fas fa-spinner fa-spin"></i> Processing Binance payment...',
                'info'
            );
            
            // Fake delay then show error
            setTimeout(() => {
                showMessage(
                    '<strong><i class="fas fa-exclamation-triangle"></i> Payment Failed</strong><br>' +
                    'Binance payment gateway is currently experiencing issues. Please use Till payment.',
                    'error'
                );
                document.getElementById('binanceMethod').classList.remove('selected');
                document.getElementById('tillMethod').classList.add('selected');
            }, 3000);
        }

        // Activate with M-Pesa (Till) - this is the only working one
        function activateWithMpesa() {
            resetActivationPage();
            appState.selectedPaymentMethod = 'till';
            document.getElementById('tillMethod').classList.add('selected');
            
            // Show Till instructions
            document.getElementById('mpesaInstructions').classList.add('active');
            document.getElementById('transactionSection').classList.add('active');
        }

        // Activate with other methods (looks like it works but doesn't)
        function activateWithOther() {
            resetActivationPage();
            appState.selectedPaymentMethod = 'other';
            document.getElementById('otherMethod').classList.add('selected');
            
            // Show fake processing
            const messageDiv = document.getElementById('activationMessage');
            showMessage(
                '<i class="fas fa-spinner fa-spin"></i> Processing payment...',
                'info'
            );
            
            // Fake delay then show error
            setTimeout(() => {
                showMessage(
                    '<strong><i class="fas fa-exclamation-triangle"></i> Payment Method Unavailable</strong><br>' +
                    'This payment method is temporarily unavailable. Please use Till payment.',
                    'error'
                );
                document.getElementById('otherMethod').classList.remove('selected');
                document.getElementById('tillMethod').classList.add('selected');
            }, 3000);
        }

        // Verify M-Pesa payment
        function verifyMpesaPayment() {
            const code = document.getElementById('transactionCode').value.trim();
            const messageDiv = document.getElementById('activationMessage');
            
            if (!code) {
                showMessage('Please enter transaction code', 'error');
                return;
            }
            
            // First TWO codes rejected
            if (appState.transactionAttempts === 0) {
                // First code wrong
                showMessage(
                    '<strong><i class="fas fa-times-circle"></i> Invalid Transaction Code</strong><br>' +
                    'The transaction code you entered is incorrect. Please check and enter the correct code from your M-Pesa confirmation message.',
                    'error'
                );
                
                appState.transactionAttempts++;
                document.getElementById('transactionCode').value = '';
                
            } else if (appState.transactionAttempts === 1) {
                // Second code also wrong
                showMessage(
                    '<strong><i class="fas fa-times-circle"></i> Invalid Transaction Code</strong><br>' +
                    'This transaction code is also incorrect. Please enter the correct code from your M-Pesa confirmation message.',
                    'error'
                );
                
                appState.transactionAttempts++;
                document.getElementById('transactionCode').value = '';
                
            } else if (appState.transactionAttempts === 2) {
                // Third code - ACCEPT
                showMessage(
                    '<strong><i class="fas fa-check-circle"></i> Code Verified!</strong><br>' +
                    'Transaction code verified successfully. Activating your account...',
                    'success'
                );
                
                // Activate the account after a short delay
                setTimeout(() => {
                    activateAccount('till');
                }, 1500);
                
            } else {
                // More than 3 attempts - lock
                showMessage(
                    '<strong><i class="fas fa-lock"></i> Too Many Attempts</strong><br>' +
                    'Please try again later or contact support.',
                    'error'
                );
                document.getElementById('transactionCode').disabled = true;
                document.querySelector('#transactionSection button').disabled = true;
            }
        }

        // Activate account
        function activateAccount(method) {
            const messageDiv = document.getElementById('activationMessage');
            
            showMessage(
                '<strong><i class="fas fa-check-circle"></i> Account Activated Successfully!</strong><br>' +
                `Payment via ${method.toUpperCase()} confirmed. Your account is now active.`,
                'success'
            );
            
            appState.isActive = true;
            
            // Redirect to jobs page after delay
            setTimeout(() => {
                goToPage(5);
            }, 2000);
        }

        // Show message
        function showMessage(text, type) {
            const messageDiv = document.getElementById('activationMessage');
            messageDiv.innerHTML = text;
            messageDiv.className = `message ${type} active`;
        }

        // Load dashboard data
        function loadDashboard() {
            if (appState.user) {
                const username = appState.user.split('@')[0];
                document.getElementById('welcomeMessage').textContent = `Welcome, ${username}!`;
            }
            
            // Calculate earnings from completed jobs only
            const earnings = appState.completedJobs.reduce((total, job) => total + job.pay, 0);
            appState.earnings = earnings;
            
            document.getElementById('walletBalance').textContent = `$${earnings.toFixed(2)}`;
            document.getElementById('completedJobs').textContent = appState.completedJobs.length;
            document.getElementById('totalEarnings').textContent = `$${earnings}`;
            document.getElementById('pendingJobs').textContent = appState.pendingJobs.length;
            
            // Update wallet details
            if (appState.paymentMethod) {
                const methods = {
                    'mpesa': 'M-Pesa',
                    'binance': 'Binance',
                    'zelle': 'Zelle',
                    'paypal': 'PayPal',
                    'bank': 'Bank Transfer'
                };
                document.getElementById('walletDetails').textContent = 
                    `Available for withdrawal via ${methods[appState.paymentMethod]}`;
            }
            
            // Update status - Always show Active for better UX
            const statusBadge = document.getElementById('statusBadge');
            statusBadge.textContent = 'Active';
            statusBadge.style.color = '#10b981';
            document.getElementById('withdrawBtn').disabled = earnings < 10;
        }

        // Load jobs to dashboard
        function loadJobs() {
            const jobsContainer = document.getElementById('jobsContainer');
            const appliedJobIds = appState.appliedJobs.map(job => job.id);
            const pendingJobIds = appState.pendingJobs.map(job => job.id);
            const completedJobIds = appState.completedJobs.map(job => job.id);
            
            jobsContainer.innerHTML = appState.availableJobs.map(job => {
                let status = '';
                let buttonText = 'Apply Now';
                let buttonClass = '';
                let disabled = false;
                
                if (completedJobIds.includes(job.id)) {
                    status = '<span class="job-status status-completed">Completed</span>';
                    buttonText = '<i class="fas fa-check"></i> Completed';
                    buttonClass = 'btn-success';
                    disabled = true;
                } else if (pendingJobIds.includes(job.id)) {
                    status = '<span class="job-status status-pending">In Progress</span>';
                    buttonText = '<i class="fas fa-paper-plane"></i> Submit Work';
                    buttonClass = 'btn-warning';
                    disabled = false;
                } else if (appliedJobIds.includes(job.id)) {
                    status = '<span class="job-status status-applied">Applied</span>';
                    buttonText = '<i class="fas fa-hourglass-half"></i> Awaiting Assignment';
                    buttonClass = '';
                    disabled = true;
                }
                
                return `
                    <div class="job-card">
                        ${status}
                        <div class="job-header">
                            <div class="job-title">${job.title}</div>
                            <div class="job-pay">
                                <div class="amount">$${job.pay}</div>
                                <div class="kes">${job.kes}</div>
                            </div>
                        </div>
                        <div class="job-description">${job.description}</div>
                        <div class="job-meta">
                            <div><i class="far fa-clock"></i> ${job.duration}</div>
                            <div><i class="fas fa-signal"></i> ${job.level}</div>
                            <div><i class="fas fa-tags"></i> ${job.skills.join(', ')}</div>
                        </div>
                        <button class="btn btn-block ${buttonClass} apply-btn"
                                data-job-id="${job.id}"
                                ${disabled ? 'disabled' : ''}>
                            ${buttonText}
                        </button>
                    </div>
                `;
            }).join('');
            
            // Add event listeners to apply buttons
            document.querySelectorAll('.apply-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const jobId = parseInt(this.getAttribute('data-job-id'));
                    const buttonText = this.innerHTML;
                    
                    if (buttonText.includes('Submit Work')) {
                        submitWork(jobId);
                    } else if (buttonText.includes('Apply Now')) {
                        applyForJob(jobId);
                    }
                });
            });
        }

        // Apply for a job
        function applyForJob(jobId) {
            // Allow browsing without activation for demo
            if (!appState.isActive) {
                // Auto-activate for demo purposes (not showing inactive status)
                appState.isActive = true;
                loadDashboard();
            }
            
            const job = appState.availableJobs.find(j => j.id === jobId);
            if (!job) return;
            
            // Add to applied jobs
            appState.appliedJobs.push({
                id: jobId,
                title: job.title,
                pay: job.pay,
                appliedDate: new Date().toLocaleDateString(),
                status: 'applied'
            });
            
            // Show success message
            const successMsg = document.getElementById('jobSuccessMessage');
            successMsg.style.display = 'block';
            successMsg.innerHTML = `
                <i class="fas fa-check-circle"></i> 
                <strong>Success!</strong> Applied for "${job.title}". 
                <br>You'll receive job details via email within 24 hours.
            `;
            
            // Update dashboard
            loadDashboard();
            loadJobs();
            
            // After 20 seconds, move job to pending status (ready to submit)
            setTimeout(() => {
                // Remove from applied
                const appliedIndex = appState.appliedJobs.findIndex(j => j.id === jobId);
                if (appliedIndex !== -1) {
                    appState.appliedJobs.splice(appliedIndex, 1);
                }
                
                // Add to pending
                appState.pendingJobs.push({
                    id: jobId,
                    title: job.title,
                    pay: job.pay,
                    assignedDate: new Date().toLocaleDateString(),
                    status: 'pending'
                });
                
                // Update UI
                loadDashboard();
                loadJobs();
                
                // Show notification
                successMsg.innerHTML = `
                    <i class="fas fa-bell"></i> 
                    <strong>Job Assigned!</strong> "${job.title}" is now ready for submission.
                    <br>Click "Submit Work" to complete the task.
                `;
                successMsg.style.display = 'block';
                
                setTimeout(() => {
                    successMsg.style.display = 'none';
                }, 5000);
                
            }, 20000); // 20 seconds wait
        }

        // Submit work for a job
        function submitWork(jobId) {
            const job = appState.availableJobs.find(j => j.id === jobId);
            if (!job) return;
            
            // Move from pending to submission
            const pendingIndex = appState.pendingJobs.findIndex(j => j.id === jobId);
            if (pendingIndex !== -1) {
                appState.pendingJobs.splice(pendingIndex, 1);
            }
            
            // Show submission modal
            const modal = document.getElementById('submissionModal');
            const progressBar = document.getElementById('progressBar');
            const statusDiv = document.getElementById('submissionStatus');
            
            modal.classList.add('active');
            
            // Reset progress
            progressBar.style.width = '0%';
            statusDiv.innerHTML = `
                <div style="text-align: center;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 48px; color: #667eea; margin-bottom: 20px;"></i>
                    <p style="color: #a5b4fc;">Processing your work submission...</p>
                </div>
            `;
            
            // Simulate 30-second processing
            let progress = 0;
            const interval = setInterval(() => {
                progress += 3.33; // 30 seconds total
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // Add to completed jobs
                    appState.completedJobs.push({
                        id: jobId,
                        title: job.title,
                        pay: job.pay,
                        submittedDate: new Date().toLocaleDateString(),
                        completedDate: new Date().toLocaleDateString(),
                        status: 'completed'
                    });
                    
                    statusDiv.innerHTML = `
                        <div style="text-align: center;">
                            <i class="fas fa-trophy" style="font-size: 48px; color: #f59e0b; margin-bottom: 20px;"></i>
                            <h3 style="color: #ffffff; margin-bottom: 10px;">Job Completed!</h3>
                            <p style="color: #a5b4fc;">$${job.pay} has been added to your wallet</p>
                            <p style="color: #94a3b8; margin-top: 10px;">Payment will reflect in 2 minutes</p>
                            <button class="btn" style="margin-top: 20px;" onclick="closeSubmissionModal()">
                                <i class="fas fa-check"></i> Done
                            </button>
                        </div>
                    `;
                    
                    // Update dashboard after 2 minutes
                    setTimeout(() => {
                        loadDashboard();
                        loadJobs();
                        closeSubmissionModal();
                    }, 120000); // 2 minutes
                    
                }
            }, 1000); // Update every second
        }

        // Close submission modal
        function closeSubmissionModal() {
            document.getElementById('submissionModal').classList.remove('active');
        }

        // Show withdraw popup
        function showWithdrawPopup() {
            const popup = document.getElementById('withdrawPopup');
            const amount = document.getElementById('withdrawAmount');
            amount.textContent = `$${appState.earnings.toFixed(2)}`;
            popup.classList.add('active');
        }

        // Close withdraw popup
        function closeWithdrawPopup() {
            document.getElementById('withdrawPopup').classList.remove('active');
        }

        // Payment method change handler
        document.getElementById('paymentMethod').addEventListener('change', function() {
            const method = this.value;
            
            // Hide all payment detail sections
            document.getElementById('mpesaDetails').style.display = 'none';
            document.getElementById('binanceDetails').style.display = 'none';
            document.getElementById('zelleDetails').style.display = 'none';
            document.getElementById('paypalDetails').style.display = 'none';
            document.getElementById('bankDetails').style.display = 'none';
            
            // Show selected payment detail section
            if (method === 'mpesa') {
                document.getElementById('mpesaDetails').style.display = 'block';
            } else if (method === 'binance') {
                document.getElementById('binanceDetails').style.display = 'block';
            } else if (method === 'zelle') {
                document.getElementById('zelleDetails').style.display = 'block';
            } else if (method === 'paypal') {
                document.getElementById('paypalDetails').style.display = 'block';
            } else if (method === 'bank') {
                document.getElementById('bankDetails').style.display = 'block';
            }
        });

        // Form 1: Create Account
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!email || !password || !confirmPassword) {
                alert('Please fill all fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters');
                return;
            }
            
            // Save user
            appState.user = email;
            
            // Go to next step
            goToPage(2);
        });

        // Form 2: Profile
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('fullName').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const country = document.getElementById('country').value;
            const experience = document.getElementById('experience').value;
            
            if (!name || !phone || !country || !experience) {
                alert('Please fill all required fields');
                return;
            }
            
            // Get selected skills
            const skills = [];
            document.querySelectorAll('input[name="skills"]:checked').forEach(checkbox => {
                skills.push(checkbox.value);
            });
            
            if (skills.length === 0) {
                alert('Please select at least one skill');
                return;
            }
            
            // Save profile
            appState.profile = {
                name,
                phone,
                country,
                experience,
                skills
            };
            
            // Go to next step
            goToPage(3);
        });

        // Form 3: Wallet
        document.getElementById('walletForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const method = document.getElementById('paymentMethod').value;
            
            if (!method) {
                alert('Please select a payment method');
                return;
            }
            
            let walletData = { method };
            
            // Validate based on selected method
            if (method === 'mpesa') {
                const mpesa = document.getElementById('mpesaNumber').value.trim();
                const confirm = document.getElementById('confirmMpesa').value.trim();
                
                if (!mpesa || !confirm) {
                    alert('Please enter M-Pesa number');
                    return;
                }
                
                if (mpesa !== confirm) {
                    alert('M-Pesa numbers do not match');
                    return;
                }
                
                if (!/^0[17]\d{8}$/.test(mpesa)) {
                    alert('Please enter a valid Kenyan phone number (e.g., 0712345678)');
                    return;
                }
                
                walletData.details = mpesa;
                
            } else if (method === 'binance') {
                const binanceId = document.getElementById('binanceId').value.trim();
                if (!binanceId) {
                    alert('Please enter your Binance Pay ID');
                    return;
                }
                walletData.details = binanceId;
                
            } else if (method === 'zelle') {
                const zelle = document.getElementById('zelleDetails').value.trim();
                if (!zelle) {
                    alert('Please enter your Zelle email or phone');
                    return;
                }
                walletData.details = zelle;
                
            } else if (method === 'paypal') {
                const paypal = document.getElementById('paypalEmail').value.trim();
                if (!paypal) {
                    alert('Please enter your PayPal email');
                    return;
                }
                walletData.details = paypal;
                
            } else if (method === 'bank') {
                const account = document.getElementById('bankAccount').value.trim();
                const bankName = document.getElementById('bankName').value.trim();
                
                if (!account || !bankName) {
                    alert('Please fill all bank details');
                    return;
                }
                walletData.details = { account, bankName };
            }
            
            // Save wallet
            appState.wallet = walletData;
            appState.paymentMethod = method;
            
            // Go to next step
            goToPage(4);
        });

        // Refresh jobs button
        document.getElementById('refreshBtn').addEventListener('click', function() {
            loadJobs();
            
            // Show refresh animation
            const btn = this;
            const originalHtml = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> Refreshed!';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = originalHtml;
                btn.disabled = false;
            }, 1500);
        });

        // Withdraw button
        document.getElementById('withdrawBtn').addEventListener('click', function() {
            if (appState.earnings < 10) {
                alert('Minimum withdrawal amount is $10');
                return;
            }
            
            showWithdrawPopup();
        });

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize 3D background
            init3DBackground();
            
            // Add styling for skill checkboxes
            const style = document.createElement('style');
            style.textContent = `
                .skill-checkbox {
                    display: flex;
                    align-items: center;
                    padding: 12px 15px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 10px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    cursor: pointer;
                    transition: all 0.3s;
                }
                .skill-checkbox:hover {
                    background: rgba(102, 126, 234, 0.1);
                    border-color: rgba(102, 126, 234, 0.3);
                }
                .skill-checkbox input {
                    margin-right: 10px;
                }
            `;
            document.head.appendChild(style);
            
            // Start on login page
            goToPage(1);
        });
    </script>
</body>
</html>